!function(){"use strict";function i(t,e){for(var n=[],o=[],i=arguments.length,r=Array(2<i?i-2:0),u=2;u<i;u++)r[u-2]=arguments[u];for(var l=r.length,a=void 0;0<l--;)n.push(r[l]);for(e&&e.key&&(a=e.key,delete e.key);n.length;){var s=n.pop();if(s&&s.pop)for(l=s.length;l--;)n.push(s[l]);else null!=s&&!0!==s&&!1!==s&&o.push(s)}return"function"==typeof t?t(e||{},o):{type:t,props:e||{},children:o,key:a}}var w=function(t){return t?t.key:null};function g(t,e){var n={};for(var o in t)n[o]=t[o];for(var i in e)n[i]=e[i];return n}function k(t,e,n,o,i){var r,u,l,a,s;"key"!==e&&"onComponentDidMount"!==e&&"onComponentDidUpdate"!==e&&"onComponentWillUnmount"!==e&&("style"===e&&"string"!=typeof n?function(t,e,n,o){for(var i in g(o,n)){var r=null==n||null==n[i]?"":n[i];"-"===i[0]?t[e].setProperty(i,r):t[e][i]=r}}(t,e,n,o):(e=e.toLowerCase(),"classname"===(s=e)&&(s="class"),l=t,a=n,"dangerouslysetinnerhtml"===(e=s)&&(l.innerHTML=a),e in t&&"list"!==e&&!i?t[e]="no"==n?"":n:null!=n&&"null"!==n&&"false"!==n&&"no"!==n&&"off"!==n&&("xlink-href"===e?(u=n,(r=t).setAttributeNS("http://www.w3.org/1999/xlink","href",u),r.setAttribute("href",u)):("true"===n&&(n=""),"dangerouslysetinnerhtml"!==e&&t.setAttribute(e,n))),null!=n&&"null"!==n&&"undefined"!==n&&"false"!==n&&"no"!==n&&"off"!==n||t.removeAttribute(e)))}var x=function(t,e,n){t.removeChild(function t(e,n){if(n.props)for(var o=0;o<n.children.length;o++)t(e.childNodes[o],n.children[o]);return e}(e,n)),n&&n.props&&n.props.onComponentDidUnmount&&n.props.onComponentDidUnmount.call(n.props.onComponentDidUnmount,t)};function S(t,e,n,o,i){if(o!==n){if(null==n||n.type!==o.type){var r=function t(e,n){var o=void 0;"number"==typeof e&&(e=e.toString()),o="string"==typeof e?document.createTextNode(e):(n=n||"svg"===e.type)?document.createElementNS("http://www.w3.org/2000/svg",e.type):document.createElement(e.type);var i=e.props;if(i){for(var r=0;r<e.children.length;r++)o.appendChild(t(e.children[r],n));for(var u in i)k(o,u,i[u],null,n)}return o}(o,i);t&&(t.insertBefore(r,e),null!=n&&x(t,e,n)),e=r}else if(null==n.type)e.nodeValue=o;else{!function(t,e,n,o){for(var i in g(e,n))n[i]!==("value"===i||"checked"===i?t[i]:e[i])&&k(t,i,n[i],e[i],o);t.mounted&&n&&n.onComponentDidUpdate&&n.onComponentDidUpdate.call(n.onComponentDidUpdate,e,n,t)}(e,n.props,o.props,i=i||"svg"===o.type);for(var u={},l={},a=[],s=n.children,c=o.children,p=0;p<s.length;p++){a[p]=e.childNodes[p];var d=w(s[p]);null!=d&&(u[d]=[a[p],s[p]])}for(var h=0,f=0;f<c.length;){var m=w(s[h]),v=w(c[f]);if(l[m])h++;else if(null==v||v!==w(s[h+1]))if(null==v)null==m&&(S(e,a[h],s[h],c[f],i),f++),h++;else{var y=u[v]||[];m===v?(S(e,y[0],y[1],c[f],i),h++):y[0]?S(e,e.insertBefore(y[0],a[h]),y[1],c[f],i):S(e,a[h],null,c[f],i),l[v]=c[f],f++}else null==m&&x(e,a[h],s[h]),h++}for(;h<s.length;)null==w(s[h])&&x(e,a[h],s[h]),h++;for(var b in u)l[b]||x(e,u[b][0],u[b][1])}return e}}var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=(function(){function s(t){this.value=t}function t(i){var r,u;function l(t,e){try{var n=i[t](e),o=n.value;o instanceof s?Promise.resolve(o.value).then(function(t){l("next",t)},function(t){l("throw",t)}):a(n.done?"return":"normal",n.value)}catch(t){a("throw",t)}}function a(t,e){switch(t){case"return":r.resolve({value:e,done:!0});break;case"throw":r.reject(e);break;default:r.resolve({value:e,done:!1})}(r=r.next)?l(r.key,r.arg):u=null}this._invoke=function(o,i){return new Promise(function(t,e){var n={key:o,arg:i,resolve:t,reject:e,next:null};u?u=u.next=n:(r=u=n,l(o,i))})},"function"!=typeof i.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(t){return this._invoke("next",t)},t.prototype.throw=function(t){return this._invoke("throw",t)},t.prototype.return=function(t){return this._invoke("return",t)}}(),function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}),o=function(){function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}}(),r=window&&window.requestAnimationFrame||window&&window.msRequestAnimationFrame||function(t){return setTimeout(t,16)};function u(t){return!Array.isArray(t)&&"object"===(void 0===t?"undefined":e(t))}var l=(new Date).getTime(),a=function(){function e(t){n(this,e),t||(t={}),this.props=t,this.selector=t.container||"body",t.render&&(this.render=t.render),t.state&&(this.state=t.state),this.selector&&(this.container=document.querySelector(this.selector)),this.componentShouldUpdate=!0,this.mounted=!1,this.element,t.componentWillMount&&(this.componentWillMount=t.componentWillMount),t.componentDidMount&&(this.componentDidMount=t.componentDidMount),t.componentWillUpdate&&(this.componentWillUpdate=t.componentWillUpdate),t.componentDidUpdate&&(this.componentDidUpdate=t.componentDidUpdate),t.componentWillUnmount&&(this.componentWillUnmount=t.componentWillUnmount)}return o(e,[{key:"componentWillMount",value:function(t){return t}},{key:"componentDidMount",value:function(t){return t}},{key:"componentWillUpdate",value:function(t){return t}},{key:"componentDidUpdate",value:function(t){return t}},{key:"componentWillUnmount",value:function(t){return t}},{key:"render",value:function(t){return t}},{key:"setState",value:function(t){if("function"==typeof t){var e=t.call(this,this.state);e&&(this.state=e)}else if(u(this.state)&&u(t)){var n=this.state;this.state=g(n,t)}else this.state=t}},{key:"update",value:function(t){if(this.render&&(this.componentShouldUpdate||!this.mounted)){var e=this.state;!0!==t&&t&&(e=t),this.container&&"string"==typeof this.container&&(this.selector=this.container,this.container=document.querySelector(this.container));var n=this.render(e),o=void 0;n&&n.props&&n.props.id&&this.container&&(o=this.container&&this.container.querySelector("#"+n.props.id)),o&&!this.mounted&&o.parentNode.removeChild(o);var i=this.element&&this.element.node;if(r=i,u=e,!(l=this)||JSON.stringify(r)!==JSON.stringify(l.render(u))){var r,u,l,a,s;if(this.element=(a=this.render(e),(s=this.element)?S(s.parentNode,s,s&&s.node,a):s=S(null,null,null,a),s.node=a,s),!this.mounted)return this.componentWillMount&&this.componentWillMount(this),this.container&&1===this.container.nodeType||console.error("The container for a class component is not a valid DOM node. Check the selector provided for the class to make sure it is a valid CSS selector and that the container exists in the DOM. You might be targeting a nonexistent node."),this.container.appendChild(this.element),this.mounted=!0,void(this.componentDidMount&&this.componentDidMount(this));this.componentWillUpdate&&this.componentWillUpdate(this),this.componentDidUpdate&&this.componentDidUpdate(this)}}}},{key:"unmount",value:function(){var e=this;if(this.element){for(var t in this.componentWillUnmount&&this.componentWillUnmount(this),["change","click","dblclick","input","keydown","keypress","keyup","mousedown","mouseleave","mouseout","mouseover","mouseup","pointercancel","pointerdown","pointermove","pointerup","select","submit","touchcancel","touchend","touchmove","touchstart"].map(function(t){e.element.removeEventListener(t,e)}),this.container.removeChild(this.element),this.container=void 0,this)delete this[t];delete this.state,this.update=void 0,this.unmount=void 0}}},{key:"state",get:function(){return this[l]},set:function(t){var e=this;this[l]=t,r(function(){return e.update()})}}]),e}(),t=new a({container:"header",render:function(t){return i("nav",null,i("h1",null,t))}});function s(){return i("tr",null,i("th",null,"Product"),i("th",null,"Price"),i("th",null,"Quantity"),i("th",null,"Total"),i("th",null))}function c(t){var e=t.row,n=t.idx;return i("tr",null,i("td",null,e.product),i("td",null,i("input",{class:"price","data-index":String(n),type:"number",min:"0",value:e.price.toFixed(2)})),i("td",null,i("input",{class:"quantity","data-index":String(n),type:"number",min:"0",value:e.quantity})),i("td",null,i("span",{class:"total"},"$",(e.price*e.quantity).toFixed(2))),i("td",null,i("button",{"data-index":n,class:"list-item__button--delete"},"X")))}function p(t){var e,n,o=t.rows;return i("tfoot",null,i("tr",null,i("td",{colspan:"3"},"Sum:"),i("td",{colspan:"2"},i("span",{class:"total"},"$",(e=o,n=0,e.forEach(function(t){n+=t.price*t.quantity}),n).toFixed(2)))))}function d(){return i("div",{id:"newRowForm"},i("p",null,i("label",{for:"product"},"Product: "),i("input",{name:"product",id:"product",type:"text",tabindex:"1"})),i("p",null,i("label",{for:"price"},"Price: "),i("input",{name:"price",id:"price",type:"text",tabindex:"2"})),i("p",null,i("label",{for:"quantity"},"Quantity: "),i("input",{name:"quantity",id:"quantity",type:"text",tabindex:"3"})),i("p",null,i("button",{id:"addRow"},"Add Row")))}function h(t){var e=t.rows;return i("li",{class:"list--spreadsheet__item"},i("table",{id:"spreadsheet"},i(s,null),e.map(function(t,e){return i(c,{row:t,idx:e})}),i(p,{rows:e})))}function f(){return i("li",{class:"list--spreadsheet__item"},i(d,null))}var m=function(t){function e(){return n(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a),o(e,[{key:"render",value:function(t){return i("ul",{class:"list--spreadsheet"},i(h,{rows:t}),i(f,null))}},{key:"addNewRow",value:function(t){var e=this.element.querySelector("#product"),n=this.element.querySelector("#price"),o=this.element.querySelector("#quantity"),i=e.value,r=Number(n.value)||0,u=Number(o.value)||0;e.value="",n.value="",o.value="";var l=this.state;i?(l.push({product:i,price:r,quantity:u}),this.state=l):alert("Please provide a product name before trying to add a row.")}},{key:"deleteRow",value:function(t){var e=t.target.dataset.index;console.log(e);var n=this.state;n.splice(e,1),this.state=n}},{key:"updateQuantity",value:function(t){var e=t.target.dataset.index,n=Number(t.target.value),o=this.state;o[e].quantity=n,this.state=o}},{key:"updatePrice",value:function(t){var e=t.target.dataset.index,n=Number(t.target.value),o=this.state;o[e].price=n,this.state=o}},{key:"handleEvent",value:function(t){"addRow"===t.target.id&&this.addNewRow(t),"list-item__button--delete"===t.target.className&&this.deleteRow(t),"quantity"===t.target.className&&this.updateQuantity(t),"price"===t.target.className&&this.updatePrice(t)}},{key:"componentDidMount",value:function(){this.element.addEventListener("click",this),this.element.addEventListener("input",this)}}]),e}();t.state="Composi Spreadsheet";new m({container:"section",state:[{product:"Apple",price:1.5,quantity:5},{product:"Orange",price:1,quantity:7},{product:"Banana",price:.9,quantity:3},{product:"Peach",price:1.1,quantity:0}]})}();
//# sourceMappingURL=app.js.map
